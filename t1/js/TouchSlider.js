/*! testGrunt 2014-08-21 */
!function(a){"use strict";var b="createTouch"in document||"ontouchstart"in a,c=document.createElement("div").style,d=function(){var a,b={OTransform:["-o-","otransitionend"],WebkitTransform:["-webkit-","webkitTransitionEnd"],MozTransform:["-moz-","transitionend"],msTransform:["-ms-","MSTransitionEnd"],transform:["","transitionend"]};for(a in b)if(a in c)return b[a];return!1}(),e=[["width","left","right"],["height","top","bottom"]],f=d&&d[0],g=function(a){return(a+"").replace(/^-ms-/,"ms-").replace(/-([a-z]|[0-9])/gi,function(a,b){return(b+"").toUpperCase()})},h=function(a){var b=g(f+a);return a in c&&a||b in c&&b},i=function(a,b){for(var c in b)"undefined"==typeof a[c]&&(a[c]=b[c]);return a},j=function(a){for(var b=a.children||a.childNodes,c=[],d=0;d<b.length;d++)1===b[d].nodeType&&c.push(b[d]);return c},k=function(a,b){for(var c=0,d=a.length;d>c&&b.call(a[c],c,a[c])!==!1;c++);},l=function(a){a=n.fn.eventHook(a),a.preventDefault()},m=d[1]||"",n=function(a,b){return this instanceof n?("string"==typeof a||a.nodeType||(b=a,a=b.id),a.nodeType||(a=document.getElementById(a)),this.cfg=i(b||{},this._default),this.element=a,void(this.element&&(this.container=this.element.parentNode||document.body,this.setup()))):new n(a,b)};n.fn=n.prototype={version:"1.3.1",_default:{id:"slider",begin:0,auto:!0,speed:600,timeout:5e3,direction:"left",align:"center",fixWidth:!0,mouseWheel:!1,mouseDrag:!0,before:new Function,after:new Function},css:function(a,b){if("string"==typeof b){var d=document.defaultView&&document.defaultView.getComputedStyle&&getComputedStyle(a,null)||a.currentStyle||a.style||{};return d[g(b)]}var e,f;for(e in b)f="float"==e?"cssFloat"in c?"cssFloat":"styleFloat":g(e),a.style[f]=b[e]},addListener:function(a,b,c,d){return a.addEventListener?(a.addEventListener(b,c,d),!0):a.attachEvent?(a.attachEvent("on"+b,c),!0):!1},removeListener:function(a,b,c,d){return a.addEventListener?(a.removeEventListener(b,c,d),!0):a.attachEvent?(a.detachEvent("on"+b,c),!0):!1},eventHook:function(c){var d={},e="changedTouches touches scale target view which clientX clientY fromElement offsetX offsetY pageX pageY toElement".split(" ");if(c=c||a.event,k(e,function(){d[this]=c[this]}),d.target=c.target||c.srcElement||document,3===d.target.nodeType&&(d.target=d.target.parentNode),d.preventDefault=function(){c.preventDefault&&c.preventDefault(),d.returnValue=c.returnValue=!1},d.stopPropagation=function(){c.stopPropagation&&c.stopPropagation(),d.cancelBubble=c.cancelBubble=!0},b&&d.touches.length)d.pageX=d.touches.item(0).pageX,d.pageY=d.touches.item(0).pageY;else if("undefined"==typeof c.pageX){var f=document.documentElement,g=document.body;d.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),d.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)}return d.origEvent=c,d},bind:function(a,b){return function(){return a.apply(b,arguments)}},setup:function(){var c=b||!this.cfg.mouseDrag,e=c?"touchstart":"mousedown",f=c?"touchmove":"mousemove",g=c?"touchend":"mouseup";if(this.slides=j(this.element),this.length=this.slides.length,this.cfg.timeout=parseInt(this.cfg.timeout),this.cfg.speed=parseInt(this.cfg.speed),this.cfg.begin=parseInt(this.cfg.begin),this.cfg.auto=!!this.cfg.auto,this.cfg.timeout=Math.max(this.cfg.timeout,this.cfg.speed),this.touching=!!b,this.css3transition=!!d,this.index=this.cfg.begin<0||this.cfg.begin>=this.length?0:this.cfg.begin,this.length<1)return!1;switch(this.comment=document.createComment("\n Powered by TouchSlider v"+this.version+",\n author: qiqiboy,\n email: imqiqiboy@gmail.com,\n blog: http://www.qiqiboy.com,\n weibo: http://weibo.com/qiqiboy\n"),this.container.insertBefore(this.comment,this.element),this.cfg.direction){case"up":case"down":this.direction=this.cfg.direction,this.vertical=1;break;case"right":this.direction="right";default:this.direction=this.direction||"left",this.vertical=0}this.addListener(this.element,e,this.bind(this._start,this),!1),this.addListener(document,f,this.bind(this._move,this),!1),this.addListener(document,g,this.bind(this._end,this),!1),this.addListener(document,"touchcancel",this.bind(this._end,this),!1),this.addListener(this.element,m,this.bind(this.transitionend,this),!1),this.addListener(a,"resize",this.bind(function(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(this.bind(this.resize,this),100)},this),!1),this.cfg.mouseWheel&&(this.addListener(this.element,"mousewheel",this.bind(this.mouseScroll,this),!1),this.addListener(this.element,"DOMMouseScroll",this.bind(this.mouseScroll,this),!1)),this.playing=this.cfg.auto,this.resize()},getSum:function(a,b,c){for(var d=0,e=b,f=g("-"+a);c>e;e++)d+=this["getOuter"+f](this.slides[e]);return d},getPos:function(a,b){var c=g("-"+a),d=this.getSum(a,b,b+1),e=this.getSum(a,0,b)+this["getOuter"+c](this.element)/2-this["get"+c](this.element)/2;switch(this.cfg.align){case"left":return-e;case"right":return this[a]-d-e;default:return(this[a]-d)/2-e}},resize:function(){clearTimeout(this.aniTimer);var a,b=this,c=e[this.vertical][0],d=g("-"+c),h=this.css(this.container,"position");return this.css(this.container,{overflow:"hidden",visibility:"hidden",listStyle:"none",position:"static"==h?"relative":h}),this[c]=this["get"+d](this.container),a={"float":this.vertical?"none":"left",display:"block"},k(this.slides,function(){b.cfg.fixWidth&&(a[c]=b[c]-b["margin"+d](this)-b["padding"+d](this)-b["border"+d](this)+"px"),b.css(this,a)}),this.total=this.getSum(c,0,this.length),a={position:"relative",overflow:"hidden"},a[f+"transition-duration"]="0ms",a[c]=this.total+2+"px",a[e[this.vertical][1]]=this.length?this.getPos(c,this.index)+"px":0,this.css(this.element,a),this.css(this.container,{visibility:"visible"}),this.playing&&this.play(),this},slide:function(a,b){var c,d,f=e[this.vertical][1],g=e[this.vertical][0],i=h("transition"),j=parseFloat(this.css(this.element,f))||0,k={},l=this.getSum(g,a,a+1);if(a=Math.min(Math.max(0,a),this.length-1),b="undefined"==typeof b?this.cfg.speed:parseInt(b),c=this.getPos(g,a),d=c-j,b=Math.abs(d)<l?Math.ceil(Math.abs(d)/l*b):b,i)k[i]=f+" ease "+b+"ms",k[f]=c+"px",this.css(this.element,k);else{var m=this,n=0,o=b/10,p=function(a,b,c,d){return-c*((a=a/d-1)*a*a*a-1)+b},q=function(){o>n?(n++,m.element.style[f]=Math.ceil(p(n,j,d,o))+"px",m.aniTimer=setTimeout(q,10)):(m.element.style[f]=c+"px",m.transitionend({propertyName:f}))};clearTimeout(this.aniTimer),q()}var r=this.slides[this.index];return this.index=a,this.cfg.before.call(this,a,r),this},play:function(){return clearTimeout(this.timer),this.playing=!0,this.timer=setTimeout(this.bind(function(){"left"==this.direction||"up"==this.direction?this.next():this.prev()},this),this.cfg.timeout),this},pause:function(){return clearTimeout(this.timer),this.playing=!1,this},stop:function(){return this.pause(),this.slide(0)},prev:function(a,b){clearTimeout(this.timer);var c=this.index;return a="undefined"==typeof a?a=1:a%this.length,c-=a,c=b===!1?Math.max(c,0):0>c?this.length+c:c,this.slide(c)},next:function(a,b){clearTimeout(this.timer);var c=this.index;return"undefined"==typeof a&&(a=1),c+=a,b===!1?c=Math.min(c,this.length-1):c%=this.length,this.slide(c)},_start:function(a){a=this.eventHook(a);var b=a.target.nodeName.toLowerCase();this.touching||"a"!=b&&"img"!=b||a.preventDefault(),this.removeListener(this.element,"click",l),this.startPos=[a.pageX,a.pageY],this.element.style[g(f+"transition-duration")]="0ms",this.startTime=+new Date,this._pos=parseFloat(this.css(this.element,e[this.vertical][1]))||0},_move:function(b){if(this.startPos&&(!b.scale||1===b.scale)){b=this.eventHook(b),this.stopPos=[b.pageX,b.pageY];var c,d=e[this.vertical][1],f=e[this.vertical][0],g=this.stopPos[this.vertical]-this.startPos[this.vertical];this.scrolling||"undefined"==typeof this.scrolling&&Math.abs(g)>=Math.abs(this.stopPos[1-this.vertical]-this.startPos[1-this.vertical])?(b.preventDefault(),g/=!this.index&&g>0||this.index==this.length-1&&0>g?Math.abs(g)/this[f]+1:1,this.element.style[d]=this._pos+g+"px",null!=a.getSelection&&(c=getSelection(),c.empty?c.empty():c.removeAllRanges&&c.removeAllRanges()),g&&"undefined"==typeof this.scrolling&&(this.scrolling=!0,clearTimeout(this.timer),clearTimeout(this.aniTimer))):this.scrolling=!1}},_end:function(){if(this.startPos){if(this.scrolling){var a,b,c,d=e[this.vertical][0],f=(e[this.vertical][1],this.stopPos[this.vertical]-this.startPos[this.vertical]),g=Math.abs(f),h=g/f,i=this.index,j=0;if(this.addListener(this.element,"click",l),g>20){b=parseFloat(this.css(this.element,e[this.vertical][1]));do{if(!(i>=0&&i<this.length)){i+=h;break}c=this.getPos(d,i),a=this.getSum(d,i,i+1)}while(Math.abs(c-b)>200&&(i-=h));j=Math.abs(i-this.index),!j&&+new Date-this.startTime<250&&(j=1)}f>0?this.prev(j,!1):this.next(j,!1),this.playing&&this.play()}delete this._pos,delete this.stopPos,delete this.startPos,delete this.scrolling,delete this.startTime}},mouseScroll:function(a){if(this.cfg.mouseWheel){a=this.eventHook(a);var b,c=this,d=a.origEvent,e=0,f=0;if("wheelDeltaX"in d)e=d.wheelDeltaX,f=d.wheelDeltaY;else if("wheelDelta"in d)f=d.wheelDelta;else{if(!("detail"in d))return;f=-d.detail}!this.vertical&&Math.abs(e)>Math.abs(f)?b=e:f&&(!d.wheelDeltaX||this.vertical&&Math.abs(e)<Math.abs(f))&&(b=f),b&&(a.preventDefault(),clearTimeout(this.mouseTimer),this.mouseTimer=setTimeout(function(){b>0?c.prev(1,!1):c.next(1,!1)},100))}},transitionend:function(a){a.propertyName==e[this.vertical][1]&&(this.cfg.after.call(this,this.index,this.slides[this.index]),this.playing&&this.play())},refresh:function(){null==this.direction?this.setup():(this.slides=j(this.element),this.length=this.slides.length,this.index=Math.max(Math.min(this.length-1,this.index),0),this.resize())},append:function(a){this.element.appendChild(a),this.refresh()},prepend:function(a){this.length?this.insertBefore(a,0):this.append(a)},insertBefore:function(a,b){this.element.insertBefore(a,this.slides[b]),this.index>=b&&this.index++,this.refresh()},remove:function(a){this.element.removeChild(this.slides[a]),this.index>=a&&this.index--,this.refresh()}},k(["Width","Height"],function(a,b){b.toLowerCase();k(["margin","padding","border"],function(c,d){n.fn[d+b]=function(b){return(parseFloat(this.css(b,d+"-"+e[a][1]+("border"==d?"-width":"")))||0)+(parseFloat(this.css(b,d+"-"+e[a][2]+("border"==d?"-width":"")))||0)}}),n.fn["get"+b]=function(a){return a["offset"+b]-this["padding"+b](a)-this["border"+b](a)},n.fn["getOuter"+b]=function(a){return a["offset"+b]+this["margin"+b](a)}}),a.TouchSlider=n}(window);